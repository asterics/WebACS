<!doctype html>
<HTML>
<HEAD>
<meta charset="UTF-8">

<Title>ECMAScriptInterpreter</Title>
</HEAD>
<BODY>
<H1>ECMAScriptInterpreter</H1>
<H3>Component Type: Processor (Subcategory: Scripting)</H3>
<p>This component is a general purpose processor that can relays the input and incoming events to a script compatible to the ECMA script specification (e.g. JavaScript). The script is specified by the property scriptname. If the property is left empty, the component will load the file "script.js" from local storage. If this file does not exist, the component will generate the file in local storage and fill it with a default "pass-through" script.
</p>
There are certain constraints for the script:
<ul>
<li>the script has to contain an object named scriptclass.</li>
<li>the object has to implement a method dataInput(input_index, input_data)</li>
<li>the object has to implement a method eventInput(event_index)</li>
</ul>
<p>
The script is provided with the following external variables:
</p>
<ul>
<li>output: an array of size 8 representing 8 IRuntimeOutputPorts</li>
<li>eventout: an array of size 8 representing 8 IRuntimeEventTriggererPorts</li>
<li>property: an array of size 8 holding strings with the property inputs from the components property fields</li>
</ul>
<p>
The sendData method of the output variables has to be called with a string. If necessary this needs to be converted into a Java string, this can be done like this:
</p>
<pre>
 str = new java.lang.String(in_data);
 output[in_nb].sendData(str.getBytes());
</pre>
<p>
</p>
For more information please see a demo script in the plugin source code!
<p>
</p>


<div class="image"><img src="img/ECMAScriptInterpreter.jpg" alt="Screenshot: ECMAScriptInterpreter plugin" title="Screenshot: ECMAScriptInterpreter plugin" /><br>
ECMAScriptInterpreter plugin</div>

<H2>Input Port Description</H2>
<ul>
<li><STRONG>inputPort1 - inputPort8 [string]:</STRONG> input ports for script parameters</li>
</ul>
<H2>Output Port description</H2>
<ul>
<li><STRONG>outputPort1 - outputPort8 [string]:</STRONG> output ports for script results</li>
</ul>
<H2>Event Listener Description</H2>
<ul>
<li><STRONG>elpPort1 - elpPort8:</STRONG> 8 event listener ports which can be used by the script code.</li>
</ul>
<H2>Event Trigger Description</H2>
<ul>
<li><STRONG>etpPort1 - elpPort8:</STRONG> 8 event trigger ports which can be used by the script code.</li>
</ul>
<H2>Properties</H2>
<ul>
<li><STRONG>scriptname [string]:</STRONG> a valid filename of an ECMA-compatible script (e.g. Javascript) which shall be interpreted</li>
<li><STRONG>value1 - value8 [string]:</STRONG> 8 properties which can be used by the script.</li>
</ul>
</BODY>
</HTML>
